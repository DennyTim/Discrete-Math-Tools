"use strict";var _createClass=function(){function a(e,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||false;d.configurable=true;if("value" in d){d.writable=true}Object.defineProperty(e,d.key,d)}}return function(d,b,c){if(b){a(d.prototype,b)}if(c){a(d,c)}return d}}();var _slicedToArray=function(){function a(f,e){var j=[];var b=true;var h=false;var g=undefined;try{for(var d=f[Symbol.iterator](),k;!(b=(k=d.next()).done);b=true){j.push(k.value);if(e&&j.length===e){break}}}catch(c){h=true;g=c}finally{try{if(!b&&d["return"]){d["return"]()}}finally{if(h){throw g}}}return j}return function(b,c){if(Array.isArray(b)){return b}else{if(Symbol.iterator in Object(b)){return a(b,c)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}}();function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function hideResult(d){var b=$("#cy");var a=$("#ca_tab");if(d.checked){a.hide(300,function(){b.animate({width:"1170px"},500,function(){cyReLayout()})})}else{b.animate({width:"580px"},300,function(){a.show(500,function(){reLayout()})})}}function hideWeight(c){var b=$("#weighted");if(c.checked){b.show(500);$("#wlabel").show(500)}else{b.hide(500);$("#wlabel").hide(500)}}function hideDuration(a){var b=$("#label-duration");if(a.checked){b.show(400)}else{b.hide(400)}}function callToAlgorithms(){var algo=document.getElementById("algorithms");eval(algo.options[algo.selectedIndex].value)}var cy=void 0;var ca=void 0;var defaultNodeStyle={"background-color":"#666",label:"data(id)",height:"25px",width:"25px","font-size":"20px"};var defaultEdgeStyle={width:2,"line-color":"#888","curve-style":"bezier",label:function label(a){return isNaN(a.data("weight"))?"":a.data("weight")},color:"red","font-size":"20px","target-arrow-color":"#910c95","target-arrow-fill":"filled","target-arrow-scale":"15","target-arrow-shape":"triangle"};var layoutname="spread";var CyLayout=void 0;var CaLayout=void 0;var animationFlag=true;var copiedEles=void 0;var drawOn=false;var weight_input=document.getElementById("weight");var matrix_input=document.getElementById("matrix_input");var auto_refresh=document.getElementById("autorefresh");var perform_button=document.getElementById("perform");var animation=document.getElementById("animation");var duration=document.getElementById("duration");var processDiv=document.getElementById("process");$(function(){cy=initializeCytoscapeObjects("cy");ca=initializeCytoscapeObjects("ca");clearCyStyle();clearCaStyle();initCircularMenu(cy);cy.graphml({layoutBy:"circle"});ca.graphml({layoutBy:"circle"});cy.edgehandles({preview:true,stackOrder:4,handleSize:10,handleHitThreshold:6,handleIcon:false,handleColor:"#ff0000",handleLineType:"ghost",handleLineWidth:3,handleOutlineColor:"#000000",handleOutlineWidth:0,handleNodes:"node",handlePosition:"middle top",hoverDelay:100,cxt:false,enabled:true,toggleOffOnLeave:false,edgeType:function b(i,j){return"flat"},loopAllowed:function g(i){return true},nodeLoopOffset:-50,nodeParams:function e(i,j){return{}},edgeParams:function d(m,n,l){var k=m.data("id")+"-"+n.data("id")+"-";var j=0;while(cy.$id(k+j).length!==0){j+=1}return{data:{id:k+j,source:m.data("id"),target:n.data("id"),weight:parseInt(weight_input.value)}}},start:function h(i){},complete:function a(k,j,i){if(auto_refresh.checked){cyReLayout()}i.forEach(function(l){if(l.isEdge()){l.animate({style:{lineColor:"red",width:6},duration:100}).animate({style:{lineColor:"#ccc",width:2},duration:500})}})},stop:function c(i){},cancel:function f(j,k,i){}});document.addEventListener("keydown",function(i){i=i||event;var j=i.which||i.keyCode||i.charCode;if(i.altKey){if(j==67){addEdgeBetweenSelected()}else{if(j==65){addNode(true,null)}else{if(j==70){reLayout()}else{if(j==83){clearSource()}else{if(j==82){clearResult()}}}}}}else{if(i.ctrlKey){if(j==67){copy(cy.$(":selected"))}else{if(j==86){paste()}else{if(j==83){stopAnimation()}else{if(j==65){cy.elements().select()}else{if(j==82){clearCaStyle()}else{if(j==70){clearCyStyle()}}}}}}}else{if(j==46){removeSelected()}}}});reLayout();hideResult(document.getElementById("hide_result"))});function clearCyStyle(){cy.elements().removeStyle();processDiv.innerHTML="";cy.style().resetToDefault().selector("node").style(defaultNodeStyle).selector("edge").style(defaultEdgeStyle).update();cy.$(":selected").select()}function clearCaStyle(){ca.elements().removeStyle();ca.style().resetToDefault().selector("node").style(defaultNodeStyle).selector("edge").style(defaultEdgeStyle).update();ca.$(":selected").select()}function copy(a){copiedEles=a}function paste(){if(copiedEles===undefined){return}var a={};cy.elements().unselect();copiedEles.forEach(function(c){if(c.isNode()){var b=addOneNode(false,{x:c.position("x")+25,y:c.position("y")+25});b.select();a[c.data("id")]=b.data("id")}});copiedEles.forEach(function(b){if(b.isEdge()){if(a[b.data("source")]!==undefined&&a[b.data("target")]!==undefined){addEdgeBwt(a[b.data("source")],a[b.data("target")],b.data("weight")).select()}}})}function initializeCytoscapeObjects(a){var b=cytoscape({container:document.getElementById(a)});b.on("select",function(c){c.target.style({"background-color":"green","line-color":"green"})});b.on("unselect",function(c){c.target.style({"background-color":"#666","line-color":"#ccc"})});b.panzoom({zoomDelay:20,zoomFactor:0.02,panSpeed:5,panDistance:1,fitPadding:20,animateOnFit:true,fitAnimationDuration:500});b.snapToGrid();b.snapToGrid("snapOff");b.snapToGrid("gridOff");return b}function selectAllOfTheSameType(a){cy.elements().unselect();if(a.isNode()){cy.nodes().select()}else{if(a.isEdge()){cy.edges().select()}}}function initConventionalMenu(b){b.contextMenus({menuItems:[{id:"remove",content:"remove",tooltipText:"remove this element only",selector:"node, edge",onClickFunction:function a(c){var d=c.target||c.cyTarget;d.remove()}},{id:"duplicate-edge",content:"duplicate edge",tooltipText:"duplicate this edge",selector:"edge",onClickFunction:function a(c){duplicateEdge(c.target,cy)}},{id:"change-weight",content:"change weight",tooltipText:"set a new weight for this edge",selector:"edge",onClickFunction:function a(c){var d=parseInt(prompt("Please enter a weight for this edge.","1"));if(!isNaN(d)){c.target.data("weight",d)}else{c.target.data("weight","")}}},{id:"add-node",content:"add node",tooltipText:"add node",coreAsWell:true,onClickFunction:function a(c){var d=c.position||c.cyPosition;addNode(false,{x:d.x,y:d.y})}},{id:"add-edge",content:"add edge",tooltipText:"add edge(s) between selected nodes",selector:"node",onClickFunction:function a(c){addEdgeBetweenSelected()}},{id:"remove-selected",content:"remove selected",tooltipText:"remove selected elements",selector:"node, edge",coreAsWell:true,onClickFunction:function a(c){removeSelected()},hasTrailingDivider:true},{id:"select-all-nodes",content:"select all nodes",tooltipText:"select all nodes",selector:"node",onClickFunction:function a(c){selectAllOfTheSameType(c.target||c.cyTarget)},hasTrailingDivider:true},{id:"select-all-edges",content:"select all edges",tooltipText:"select all edges",selector:"edge",onClickFunction:function a(c){selectAllOfTheSameType(c.target||c.cyTarget)},hasTrailingDivider:true},{id:"bfs",content:"start BFS",tooltipText:"start breadth first search at this node",selector:"node",onClickFunction:function a(c){cy.elements().unselect();var d=c.target||c.cyTarget;d.select();breadthFirstSearch()}},{id:"dfs",content:"start DFS",tooltipText:"start depth first search at this node",selector:"node",onClickFunction:function a(c){cy.elements().unselect();var d=c.target||c.cyTarget;d.select();depthFirstSearch()}}]})}function initCircularMenu(b){b.cxtmenu({menuRadius:75,activePadding:10,selector:"node",commands:[{content:'<i class="fa fa-road fa-2x" aria-hidden="true"></i>',select:function a(c){c.select();addEdgeBetweenSelected()}},{content:'<i class="fa fa-trash fa-2x" aria-hidden="true"></i>',select:function a(c){cy.remove(c);if(auto_refresh.checked){cyReLayout()}}},{content:"BFS",select:function a(c){cy.elements().unselect();c.select();breadthFirstSearch()}},{content:"DFS",select:function a(c){cy.elements().unselect();c.select();depthFirstSearch()}}]});b.cxtmenu({menuRadius:75,activePadding:10,selector:"edge",commands:[{content:'<i class="fa fa-trash fa-2x" aria-hidden="true"></i>',select:function a(c){cy.remove(c);if(auto_refresh.checked){cyReLayout()}}},{content:'<i class="fa fa-plus fa-2x" aria-hidden="true"></i>',select:function a(c){duplicateEdge(c,cy)}},{content:'<i class="fa fa-tag fa-2x" aria-hidden="true"></i>',select:function a(d){var c=parseInt(prompt("Please enter a weight for this edge.","1"));if(!isNaN(c)){d.data("weight",c)}else{d.data("weight","")}}}]});b.cxtmenu({menuRadius:75,activePadding:10,selector:"core",commands:[{content:'<i class="fa fa-plus fa-2x" aria-hidden="true"></i>',select:function a(){addNode(false,null)}},{content:'<i class="fa fa-trash fa-2x" aria-hidden="true"></i>',select:function a(){cy.remove(cy.elements(":selected"))}},{content:'<i class="fa fa-crosshairs fa-2x" aria-hidden="true"></i>',select:function a(){cy.elements().select()}},{content:'<i class="fa fa-refresh fa-2x" aria-hidden="true"></i>',select:function a(){reLayout()}},{content:'<i class="fa fa-external-link fa-2x" aria-hidden="true"></i>',select:function a(){if(drawOn){b.edgehandles("drawoff")}else{b.edgehandles("drawon")}drawOn=!drawOn}}]})}function addNode(e,a){stopAnimation();var d=document.getElementById("nid");var b=parseInt(d.value);b=isNaN(b)?1:b<1?1:b;for(var c=0;c<b;c++){addOneNode(e,a)}if(auto_refresh.checked){cyReLayout()}}function addOneNode(c,a){var b=1;while(cy.$id(b+"").length!==0){b+=1}if(c){return cy.add({group:"nodes",data:{id:b},position:{x:parseInt(Math.random()*500+25),y:parseInt(Math.random()*500+25)}})}else{if(a===null){return cy.add({group:"nodes",data:{id:b}})}else{return cy.add({group:"nodes",data:{id:b},position:a})}}}function addEdge(){stopAnimation();var b=document.getElementById("src_tg");var j=b.value;var g=j.split("-");var f=g[0];var e=g[1];var d=g[2]===undefined?1:isNaN(parseInt(g[2]))?1:parseInt(g[2]);if(d<1){d=1}var h=0;var a=f+"-"+e+"-";for(var c=0;c<d;c++){while(cy.$id(a+h).length!==0){h+=1}cy.add({group:"edges",data:{id:a+h,source:f,target:e,weight:parseInt(weight_input.value)}})}if(auto_refresh.checked){cyReLayout()}}function snapToGrid(b,a){if(a){b.snapToGrid("snapOn");b.snapToGrid("gridOn")}else{b.snapToGrid("snapOff");b.snapToGrid("gridOff")}}function changeLayout(a){var b=document.getElementById("layout").options[a].value;if(b==="snapToGrid"){snapToGrid(cy,true);snapToGrid(ca,true);layoutname=""}else{snapToGrid(cy,false);snapToGrid(ca,false);layoutname=b}reLayout()}function reLayout(){cyReLayout();caReLayout()}function cyReLayout(){var a=0;for(var b=0;b<cy.edges().length;b++){a+=getWeight(cy.edges()[b])}document.getElementById("cy_weight").innerHTML=a.toString();if(CyLayout!==undefined){CyLayout.stop()}if(layoutname===""){return}CyLayout=cy.layout(layout_options[layoutname]);CyLayout.run()}function caReLayout(){var a=0;for(var b=0;b<ca.edges().length;b++){a+=getWeight(ca.edges()[b])}document.getElementById("ca_weight").innerHTML=a.toString();if(CaLayout!==undefined){CaLayout.stop()}if(layoutname===""){return}CaLayout=ca.layout(layout_options[layoutname]);CaLayout.run()}function removeNode(){stopAnimation();var e=document.getElementById("nodeid");var b=e.value;var h=b.split(",");if(h.length===1){var a=b.split("-");if(a.length===1){cy.remove(cy.nodes().$id(b))}else{var d=parseInt(a[0]);var g=parseInt(a[1]);for(var f=d;f<=g;f++){cy.remove(cy.$id(f))}}}else{for(var c=0;c<h.length;c++){cy.remove(cy.$id(parseInt(h[c])))}}e.value="";if(auto_refresh.checked){cyReLayout()}}function removeEdge(){stopAnimation();var e=document.getElementById("r_src_tg");var c=e.value;var g=c.split("-");if(g[1]===undefined){return}var b=g[2]===undefined?1:parseInt(g[2]);var a=cy.edges("[id ^='"+g[0]+"-"+g[1]+"-']");var f=b>a.length?a.length:b;for(var d=0;d<f;d++){cy.remove(a[d])}if(auto_refresh.checked){cyReLayout()}}function duplicateEdge(d,e){var a=d.data("id").split("-");var b=0;while(e.$id(a[0]+"-"+a[1]+"-"+b).length!==0){b+=1}return e.add({group:"edges",data:{id:a[0]+"-"+a[1]+"-"+b,source:a[0],target:a[1],weight:d.data("weight")}})}function removeSelected(){stopAnimation();cy.remove(cy.$(":selected"));if(auto_refresh.checked){cyReLayout()}}function addEdgeBetweenSelected(){stopAnimation();var b=cy.nodes(":selected");var e=parseInt(weight_input.value);var a=b.length;if(a>1){for(var d=0;d<b.length;d++){for(var c=d+1;c<b.length;c++){addEdgeBwt(b[d].data("id"),b[c].data("id"),e)}}}else{if(a===1){addEdgeBwt(b[0].data("id"),b[0].data("id"),e)}}if(auto_refresh.checked){cyReLayout()}}function addEdgeBwt(e,d,c){var b=e+"-"+d+"-";var a=0;while(cy.$id(b+a).length!==0){a+=1}return cy.add({group:"edges",data:{id:b+a,source:e,target:d,weight:c}})}function getWeight(a){var b=a.data("weight");return isNaN(b)?1:b}function getTarget(b,a){var c=void 0;if(a.data("source")===b.data("id")){c=cy.$id(a.data("target"))}else{c=cy.$id(a.data("source"))}return c}function getCaTarget(b,a){var c=void 0;if(a.data("source")===b.data("id")){c=ca.$id(a.data("target"))}else{c=ca.$id(a.data("source"))}return c}function clearSource(){stopAnimation();cy.remove(cy.elements());document.getElementById("cy_weight").innerHTML=""}function clearResult(){stopAnimation();ca.remove(ca.elements());document.getElementById("ca_weight").innerHTML="";document.getElementById("path").innerHTML=""}function stopAnimation(){cy.elements().stop();ca.elements().stop();animationFlag=false}function readAM(){clearCyStyle();createFromAM(eval(matrix_input.value))}function readWM(){clearCyStyle();createFromWM(eval(matrix_input.value))}function createFromAM(c){stopAnimation();if(c.length!==c[0].length){return}clearSource();var b=c.length;cy.startBatch();if(layoutname===""){for(var e=1;e<=b;e++){cy.add({group:"nodes",data:{id:e},position:{x:Math.random()*250+25,y:Math.random()*250+25}})}}else{for(var f=1;f<=b;f++){cy.add({group:"nodes",data:{id:f}})}}for(var g=0;g<b;g++){for(var d=0;d<b;d++){for(var a=0;a<c[g][d];a++){cy.add({group:"edges",data:{id:g+1+"-"+(d+1)+"-"+a,source:g+1,target:d+1}})}}}cy.endBatch();cyReLayout()}function createFromWM(b){stopAnimation();if(b.length!==b[0].length){return}clearSource();var a=b.length;cy.startBatch();if(layoutname===""){for(var d=1;d<=a;d++){cy.add({group:"nodes",data:{id:d},position:{x:Math.random()*250+25,y:Math.random()*250+25}})}}else{for(var f=1;f<=a;f++){cy.add({group:"nodes",data:{id:f}})}}for(var e=0;e<a;e++){for(var c=0;c<a;c++){if(b[e][c]>0){cy.add({group:"edges",data:{id:e+1+"-"+(c+1)+"-0",source:e+1,target:c+1,weight:b[e][c]}})}}}cy.endBatch();cyReLayout()}function generateGraph(){stopAnimation();clearCyStyle();var l=document.getElementById("simple").checked;var o=document.getElementById("weighted").checked;var a=parseInt(prompt("Please enter the number of nodes","6"));var m=new Array(a);for(var p=0;p<m.length;p++){m[p]=new Array(a)}if(l){var r=parseFloat(prompt("Please specify the propability that two nodes are connected.\nRange: 0 to 1","0.25"));if(o){var g=prompt("Please specify the weight range.\nExample: 1-5 represents range from 1 to 5.\n Lower limit must be greater than 0.","1-4");var s=g.split("-");var t=parseInt(s[0])>0?parseInt(s[0]):1;var h=parseInt(s[1])>=t?parseInt(s[1])-t+1:t+4;for(var e=0;e<a;e++){for(var n=0;n<a;n++){if(e!==n){if(Math.random()<r){m[e][n]=Math.floor(Math.random()*h+t)}else{m[e][n]=0}}}}createFromWM(m)}else{for(var d=0;d<a;d++){for(var b=0;b<a;b++){if(d!==b){if(Math.random()<r){m[d][b]=1}else{m[d][b]=0}}}}createFromAM(m)}}else{var f=parseInt(prompt("Please specify the max number of edges connecting two nodes.\nRange: 2 to infinity","2"));var q=parseFloat(prompt("Please specify the the probability of having multiple edges","0.25"));for(var c=0;c<a;c++){for(var k=0;k<a;k++){if(c===k){if(Math.random()<q/2){m[c][k]=Math.floor((Math.random()*f+1)/2)}}else{if(Math.random()<q){m[c][k]=Math.floor(Math.random()*f+1)}else{if(Math.random()>1/f){m[c][k]=1}else{m[c][k]=0}}}}}createFromAM(m)}}function Kn(){stopAnimation();clearSource();var a=parseInt(prompt("Please enter the number of vertices","5"));var c=prompt("Please specify the weight range.\nLeave this blank if you want an unweighted graph.\nExample: 1-5 represents range from 1 to 5.\nLower limit must be greater than 0.","");var k=new Array(a);if(c.length>0){var l=c.split("-");var e=parseInt(l[0])>0?parseInt(l[0]):1;var f=parseInt(l[1])>e?parseInt(l[1])-e+1:e+4;for(var d=0;d<a;d++){k[d]=new Array(a);for(var b=0;b<a;b++){if(d!==b){k[d][b]=parseInt(Math.random()*f+e)}}}createFromWM(k)}else{for(var h=0;h<a;h++){k[h]=new Array(a);for(var g=0;g<a;g++){if(h!==g){k[h][g]=1}}}createFromAM(k)}}function getCyStartNode(c,a){var b=cy.nodes(":selected");if(b.length<=0){b=cy.$id(prompt(c,a));if(b.length<=0){return undefined}}else{b=b[0]}return b}function breadthFirstSearch(){stopAnimation();var a=getCyStartNode("Please enter the id of the starting node","1");if(a===undefined){return}clearCyStyle();cy.elements().unselect();var b=cy.elements().bfs({root:a,directed:true}).path;clearResult();var c=new LinkedList();b.select();ca.add(b);b.forEach(function(d){c.add(d)});caReLayout();c.traverse(animation.checked,true)}function depthFirstSearch(){stopAnimation();var a=getCyStartNode("Please enter the id of the starting node","1");if(a===undefined){return}clearCyStyle();cy.elements().unselect();var b=cy.elements().dfs({root:a,directed:true}).path;clearResult();var c=new LinkedList();b.select();ca.add(b);b.forEach(function(d){c.add(d)});caReLayout();c.traverse(animation.checked,true)}function performDijkstra(){stopAnimation();var a=cy.nodes(":selected");var d=void 0;if(a.length>=2){d=cy.elements().dijkstra({root:a[0],weight:getWeight,directed:true}).pathTo(a[1])}else{var c=prompt("Please enter the id of source and target nodes, src-tg.\nExample: 1-2","");var b=c.split("-");d=cy.elements().dijkstra("#"+b[0],getWeight,true).pathTo("#"+b[1])}var e=new LinkedList();d.forEach(function(f){e.add(f)});clearCyStyle();clearResult();ca.add(d);caReLayout();d.select();e.traverse(animation.checked,true)}function colorRGB2Hex(c){var e=c[0];var d=c[1];var a=c[2];return"#"+((1<<24)+(e<<16)+(d<<8)+a).toString(16).slice(1)}var jetMap=[[0,0,143],[0,0,159],[0,0,175],[0,0,191],[0,0,207],[0,0,223],[0,0,239],[0,0,255],[0,16,255],[0,32,255],[0,48,255],[0,64,255],[0,80,255],[0,96,255],[0,112,255],[0,128,255],[0,143,255],[0,159,255],[0,175,255],[0,191,255],[0,207,255],[0,223,255],[0,239,255],[0,255,255],[16,255,239],[32,255,223],[48,255,207],[64,255,191],[80,255,175],[96,255,159],[112,255,143],[128,255,128],[143,255,112],[159,255,96],[175,255,80],[191,255,64],[207,255,48],[223,255,32],[239,255,16],[255,255,0],[255,239,0],[255,223,0],[255,207,0],[255,191,0],[255,175,0],[255,159,0],[255,143,0],[255,128,0],[255,112,0],[255,96,0],[255,80,0],[255,64,0],[255,48,0],[255,32,0],[255,16,0],[255,0,0],[239,0,0],[223,0,0],[207,0,0],[191,0,0],[175,0,0],[159,0,0],[143,0,0],[128,0,0]];var jetMapHex=["#00008f","#00009f","#0000af","#0000bf","#0000cf","#0000df","#0000ef","#0000ff","#0010ff","#0020ff","#0030ff","#0040ff","#0050ff","#0060ff","#0070ff","#0080ff","#008fff","#009fff","#00afff","#00bfff","#00cfff","#00dfff","#00efff","#00ffff","#10ffef","#20ffdf","#30ffcf","#40ffbf","#50ffaf","#60ff9f","#70ff8f","#80ff80","#8fff70","#9fff60","#afff50","#bfff40","#cfff30","#dfff20","#efff10","#ffff00","#ffef00","#ffdf00","#ffcf00","#ffbf00","#ffaf00","#ff9f00","#ff8f00","#ff8000","#ff7000","#ff6000","#ff5000","#ff4000","#ff3000","#ff2000","#ff1000","#ff0000","#ef0000","#df0000","#cf0000","#bf0000","#af0000","#9f0000","#8f0000","#800000"];function pageRank(){var b=cy.nodes().length;var h=250;var f=15;var g=cy.elements().pageRank({dampingFactor:0.85,precision:0.0001});var e=new Array(cy.nodes().length);cy.nodes().forEach(function(i){e.push(g.rank(i))});var d=_.min(e);var a=_.max(e);var c=a-d;cy.nodes().forEach(function(l){var k=g.rank(l);var j=Math.round((h+f*b)*k);l.animate({style:{width:j+"px",height:j+"px",backgroundColor:jetMapHex[Math.floor((k-d)/c*63)]},duration:1000});l.style({fontSize:13+Math.floor(Math.pow(j,0.33))+"px",label:function i(m){return m.data("id")+"\n"+(k*100).toFixed(2)+"%"},textWrap:"wrap",textValign:"top"})})}function myPageRank(){var x=0.85;var a=0.0001;var u=cy.nodes();var A=u.length;var g=new Array(A);var p=getAM(cy,false);var k=250;var F=15;var b=(1-x)/A;var E=Math.round(+duration.value);var I=true;var y=2;animationFlag=true;u.forEach(function(J,j){g[j]=J.outgoers("edge").length});var s=new Array(A);for(var z=0;z<A;z++){s[z]=1/A}function t(K){var J=Infinity;var i=0;for(var j=0;j<A;j++){if(K[j]<J){J=K[j]}if(K[j]>i){i=K[j]}}return[J,i]}function m(j,i){return{width:j+"px",height:j+"px",backgroundColor:i}}function e(J,K){var i=13+Math.floor(Math.pow(J,0.33));return{fontSize:i+"px",label:function j(L){return L.data("id")+"\n"+(K*100).toFixed(2)+"%"},textWrap:"wrap",textValign:"top"}}function h(L,N){var O=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};var M=t(L),j=_slicedToArray(M,2),K=j[0],i=j[1];K-=0.00001;var J=i-K;u.forEach(function(S,Q){var R=L[Q];var P=Math.round((k+F*A)*R);S.animate({style:m(P,jetMapHex[Math.floor((R-K)/J*63)]),duration:N,complete:O});S.style(e(P,R))})}function D(Y,O,Q,P){cy.edges().removeStyle();processDiv.innerHTML="Iteration "+Y+", Calculating PR for node "+(O+1);var X=0;var N=undefined;for(var M=0;M<A;M++){if(O!==M){if(p[M][O]>0){var K=P[M]*p[M][O]/g[M];X+=K;var W=cy.$('[id^="'+u[M].data("id")+"-"+u[O].data("id")+'-"]');W.data("tpr",(K*100).toFixed(1)+"%");N=N===undefined?W:N.union(W)}}}if(N!==undefined){N.style({textRotation:"autorotate",label:function T(i){return i.data("tpr")},fontSize:"16px",color:"#c20b00",fontWeight:"bold"});N.animate({style:{lineColor:"#00e3ff",width:"6"},duration:Math.round(E*0.8)}).animate({style:{lineColor:"#ccc",width:"2"},duration:Math.round(E*0.2)})}if(animationFlag){var J=X*x+b;Q[O]=J;var U=t(Q),S=_slicedToArray(U,2),L=S[0],R=S[1];L-=0.0001;var V=R-L;var Z=Math.round((k+F*A)*J);setTimeout(function(){u[O].style(e(Z,J));u[O].animate({style:m(Z,jetMapHex[Math.floor((J-L)/V*63)]),duration:E,complete:function i(){if(animationFlag){O+=1;if(O<A){D(Y,O,Q,P)}else{if(I){processDiv.innerHTML="Normalizing PR values...";cy.edges().removeStyle();Q=v(Q);h(Q,E,function(){cy.elements().stop();setTimeout(function(){if(math.norm(math.subtract(P,Q))>a){D(Y+1,0,Q,Q.concat())}else{processDiv.innerHTML="Done!"}},10)})}else{if(math.norm(math.subtract(P,Q))>a){D(Y+1,0,Q,Q.concat())}else{processDiv.innerHTML="Normalizing PR values...";h(v(Q),E,function(){processDiv.innerHTML="Done!";cy.edges().removeStyle()})}}}}}},10)})}}function v(i){var j=math.sum(i);return i.map(function(J){return J/j})}if(animation.checked){u.forEach(function(M,K){var L=1/A;var J=Math.round((k+F*A)*L);M.style(e(J,L));M.animate({style:m(J,colorRGB2Hex([128,255,128])),duration:E,complete:function j(){if(K===A-1){D(1,0,s,s.concat())}}})})}else{if(y===1){var r=void 0;do{r=s;var l=s.concat();for(var H=0;H<A;H++){var c=0;for(var w=0;w<A;w++){if(H!==w&&p[w][H]>0){c+=s[w]*p[w][H]/g[w]}}l[H]=c*x+b}if(I){s=v(l)}else{s=l}}while(math.norm(math.subtract(s,r))>a);if(!I){s=v(s)}}else{if(y===2){var f=math.multiply(math.ones(A),1/A);var o=math.zeros(A,A);for(var C=0;C<A;C++){for(var q=0;q<A;q++){if(p[C][q]>0){o=math.subset(o,math.index(C,q),1/g[C])}}}var d=void 0;do{d=math.clone(f);f=math.add(math.multiply(math.multiply(f,o),x),b)}while(math.norm(math.subtract(f,d))>a);s=v(f.toArray())}else{if(y===3){var G=math.zeros(A,A);for(var B=0;B<A;B++){for(var n=0;n<A;n++){if(p[B][n]>0){G=math.subset(G,math.index(B,n),1/g[B])}}}s=v(math.multiply(math.inv(math.subtract(math.eye(A,A),math.multiply(x,G))),math.multiply(math.ones(A),b)).toArray())}}}h(s,1000)}}var LinkedListNode=function LinkedListNode(b,a){_classCallCheck(this,LinkedListNode);this.cargo=b;this.next=a};var LinkedList=function(){function e(){_classCallCheck(this,e);this.head=null;this.length=0}_createClass(e,[{key:"getTail",value:function c(){var g=this.head;while(g.next!==null){g=g.next}return g}},{key:"add",value:function d(g){if(this.length===0){this.head=new LinkedListNode(g,null)}else{this.getTail().next=new LinkedListNode(g,null)}this.length+=1}},{key:"addNode",value:function f(g){if(this.length===0){this.head=g}else{this.getTail().next=g}this.length+=1}},{key:"search",value:function a(h){var g=this.head;while(g!==null){if(h(g.cargo)){return g}g=g.next}return null}},{key:"traverse",value:function b(i,m){var k=this.head;var h=0;if(m){var g="";while(k!==null){var j=k.cargo;if(j.isNode()){g+='<span class="normal" id="n'+h+'">'+j.data("id")+"</span>"}else{g+='<span class="normal" id="n'+h+'"> → </span>'}h+=1;k=k.next}document.getElementById("path").innerHTML=g}if(i){animationFlag=true;k=this.head;h=1;var l=function l(o){if(o.cargo.isNode()){o.cargo.animate({style:{backgroundColor:"#00f1f1",width:"30px",height:"30px"},duration:Math.round(+duration.value*0.1)}).animate({style:{backgroundColor:"#de4400",width:"20px",height:"20px"},duration:Math.round(+duration.value*0.4),complete:function n(){if(!animationFlag){return}if(o.next!==null){if(m){document.getElementById("n"+h).className="current";document.getElementById("n"+(h-1)).className="normal";h+=1}l(o.next)}}})}else{o.cargo.animate({style:{lineColor:"#00f1f1",width:"6"},duration:Math.round(+duration.value*0.2)}).animate({style:{lineColor:"#de4400",width:"3"},duration:Math.round(+duration.value*0.8),complete:function n(){if(!animationFlag){return}if(o.next!==null){if(m){document.getElementById("n"+h).className="current";document.getElementById("n"+(h-1)).className="normal";h+=1}l(o.next)}}})}};if(m){document.getElementById("n0").className="current"}l(k)}}}]);return e}();function getAM(k,e){var g=void 0,f=void 0;var d=k.nodes();var a=d.length;var b=new Array(a);var h={};for(g=0;g<a;g++){b[g]=new Array(a);h[d[g].data("id")]=g;for(f=0;f<a;f++){b[g][f]=0}}k.edges().forEach(function(c){g=h[c.data("source")];f=h[c.data("target")];b[g][f]+=1});if(e){matrix_input.value=matrixToString(b)}return b}function getWM(g,d){var f=void 0,e=void 0,k=void 0;var a=g.nodes();var b=a.length;var h=new Array(b);var l={};for(f=0;f<b;f++){h[f]=new Array(b);l[a[f].data("id")]=f;for(e=0;e<b;e++){h[f][e]=0}}g.edges().forEach(function(c){f=l[c.data("source")];e=l[c.data("target")];k=getWeight(c);if(h[f][e]===0){h[f][e]=k}else{if(k<h[f][e]){h[f][e]=k}}});if(d){matrix_input.value=matrixToString(h)}return h}function matrixToString(a){var c="[["+a[0].toString()+"],\n";for(var b=1;b<a.length-1;b++){c+=" ["+a[b].toString()+"],\n"}c+=" ["+a[a.length-1].toString()+"]]";return c};